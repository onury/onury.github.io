
<html><head></head><body><h1 id="docma-templates">Docma Templates</h1>
<hr />
<p>Docma parses <a href="http://http://usejsdoc.org">JSDoc</a> comments into a Javascript object and builds a SPA (Single Page Application) from the given template. The documentation data is then passed to this styled template within a global <code>docma</code> object. <a href="https://daringfireball.net/projects/markdown">Markdown</a> files are converted to HTML files and created in the same destination directory.</p>
<p>Docma templates are essentially web files that mainly make use of <a href="http://www.dustjs.com">Dust.js</a> internally. You can check out the <a href="https://github.com/onury/docma/tree/master/templates/default">default template</a> for how a template is structured and how partials are used.</p>
<ul>
<li><a href="#template-structure">Template Structure</a></li>
<li><a href="#template-configuration">Template Configuration</a></li>
<li><a href="#html">HTML</a></li>
<li><a href="#partials">Partials</a></li>
<li><a href="#docma-web-core">Docma-Web Core</a></li>
<li><a href="#custom-scripts">Custom Scripts</a></li>
<li><a href="#initializing-the-template-web-app-">Initializing the Template (Web App)</a></li>
<li><a href="#css-less">CSS &amp; Less</a></li>
<li><a href="#other-files">Other Files</a></li>
<li><a href="#docma-default-template">Docma Default Template</a></li>
</ul>
<h2 id="template-structure">Template Structure</h2>
<pre><code class="lang-html">/template                        Required
    ├─ docma.template.json          ✔︎      Template configuration.
    ├─ index.html                   ✔︎      Main entry point. (defined in docma.template.json)
    ├─ /partials                    ✔︎      Partials to be compiled.
    │      └─ docma-api.html        ✔︎      Partial for displaying API documentation data.
    │      └─ docma-content.html           Partial for converted markdown and other HTML.
    │      └─ docma-404.html               Partial for 404 - Not Found errors.
    ├─ /js
    ├─ /css
    ├─ /less
    ├─ ...
    :
</code></pre>
<h2 id="template-configuration">Template Configuration</h2>
<p>Docma templates should have a <code>docma.template.json</code> in the root of the template. This file defines template specific settings such as name of the template, version, the main entry point, document settings, ignored files, etc... This object can be accessed via <code>docma.template.options</code> within the template.</p>
<table>
    <tbody><tr>
        <td><b>Config</b></td>
        <td><b>Type</b></td>
        <td><b>Default</b></td>
        <td><b>Description</b></td>
    </tr>
    <tr>
        <td><code><b>name</b></code></td>
        <td><code>String</code></td>
        <td></td>
        <td>
            Required. Name of the template.
        </td>
    </tr>
    <tr>
        <td><code><b>version</b></code></td>
        <td><code>String</code></td>
        <td><code>"1.0.0"</code></td>
        <td>
            Version of the template. (<a href="http://semver.org/">semver</a>).
        </td>
    </tr>
    <tr>
        <td><code><b>author</b></code></td>
        <td><code>String</code></td>
        <td></td>
        <td>
            Required. Author information.
        </td>
    </tr>
    <tr>
        <td><code><b>license</b></code></td>
        <td><code>String</code></td>
        <td></td>
        <td>
            Required. Name of the license. e.g. <code>"MIT"</code>
        </td>
    </tr>
    <tr>
        <td><code><b>main</b></code></td>
        <td><code>String</code></td>
        <td><code>"index.html"</code></td>
        <td>
            Name of the main HTML file which is the entry point of the template.
        </td>
    </tr>
    <tr>
        <td><code><b>ignore</b></code></td>
        <td><code>Array</code></td>
        <td><code>undefined</code></td>
        <td>
            List of files or directories to be ignored. <a href="https://github.com/isaacs/node-glob">Globs</a> allowed.
        </td>
    </tr>
    <tr>
        <td><code><b>compile</b></code></td>
        <td><code>Object</code></td>
        <td><code>undefined</code></td>
        <td>
            Hash-map for files to be compiled. Each key should be a relative path to template directory and each value should be a relative path to output directory (including the file name). Currently only Javascript and Less files are supported. e.g. <code>{ "js/main.js": "js/main.min.js", "less/app.less": "css/app.css" }</code>.
        </td>
    </tr>
    <tr>
        <td><code><b>options</b></code></td>
        <td><code>Object</code></td>
        <td><code>undefined</code></td>
        <td>
            Template default options. This object will be merged with the template options defined at build-time.
        </td>
    </tr>
</tbody></table>

<p>Note that <code>docma.template.json</code> does not include any build configuration. This only configures the template.</p>
<h3 id="html">HTML</h3>
<p><code>&lt;template&gt;/index.html</code> is the default entry point (main file) of the generated documentation. It should not include any Dust templates, but can of course include other custom HTML.</p>
<p>It should also include a <code>&lt;div id="docma-main"&gt;&lt;/div&gt;</code> which all the Dust templates will be compiled into. If you don't define this element, it will be created and dynamically appended to the body of the document.</p>
<p>Note that <code>index.html</code> is the default name of the entry point. You can customize this (name) in <code>docma.template.json</code>.</p>
<p>Example main file (<code>index.html</code>):</p>
<pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="docma-main"&gt;&lt;/div&gt;
    &lt;div id="my-footer"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>An empty body would also be valid but we want the footer to come after <em>docma-main</em> element. So it's explicitly defined.</p>
<p>Also, note that <strong>title</strong> of the document is not set. Since this is a template, title will be defined at build time and <code>&lt;title&gt;</code> element will be automatically added to the output document. See <a href="#build-configuration">Build Configuration</a>.</p>
<h3 id="partials">Partials</h3>
<p>Put all <a href="http://www.dustjs.com">Dust.js</a> partials in <code>&lt;template&gt;/partials</code> directory.</p>
<p>You can have sub directories within <code>&lt;template&gt;/partials</code> but all HTML files in these directories will be treated as if they were at the same level (under <code>&lt;template&gt;/partials</code> directory). For example, if you have a template at <code>&lt;template&gt;/partials/widgets/menu.html</code>, you should still include it like this: <code>{&gt;"menu"/}</code> not <code>{&gt;"widgets/menu"/}</code> or <code>{&gt;"partials/widgets/menu"/}</code>. That's why all partials should have unique names.</p>
<p>These HTML files under <code>&lt;template&gt;/partials</code> are pre-compiled into Javascript and will be included as Dust JS templates. (Note that this directory will not be copied over to output directory.)</p>
<h4 id="api-documentation-partial">API Documentation Partial</h4>
<p>You should include a (documentation) partial and name it <code>docma-api.html</code>. This partial is required and, will be compiled and loaded into your main HTML (i.e. <code>index.html</code>), when navigated. All JSDoc generated documentation data should be displayed within this partial. JSDoc data is accessible via <code>docma.documentation</code> (array). Since <code>docma</code> is global, within a partial you can iterate documentation symbols/items by <code>{#documentation}..{/documentation}</code>.</p>
<p>A simple example for <code>docma-api.html</code> partial:</p>
<pre><code class="lang-html">{&gt;"menu"/}
{#documentation}
    &lt;h4 id="{.|$id}"&gt;{longname}&lt;/h4&gt;
    &lt;p&gt;{description}&lt;/p&gt;
{/documentation}
{&gt;"footer"/}
</code></pre>
<h4 id="content-partial">Content Partial</h4>
<p>In order to include other HTML content in the generated output (such as markdown files converted to HTML); you can also create another partial called <code>docma-content.html</code>. This is <em>optional</em> (and will be auto-generated). However, you should always create one for the template, for better layout and style, since the auto-generated partial will have a very basic layout.</p>
<p>Content partial should include a <code>&lt;div id="docma-content"&gt;&lt;/div&gt;</code> in itself. Docma will load the target content into this element.</p>
<p>This partial will also be compiled and loaded into in your main HTML, when navigated; so all styles and scripts of the main file will still be available.</p>
<p>A simple example for <code>docma-content.html</code> partial:</p>
<pre><code class="lang-html">{&gt;"menu"/}
&lt;div id="docma-content"&gt;&lt;/div&gt;
{&gt;"footer"/}
</code></pre>
<h3 id="docma-web-core">Docma-Web Core</h3>
<p>When you build the documentation with your template, a <code>docma-web.js</code> will be generated (and linked in your main HTML); which is the core engine for the documentation web app. This will include everything the app needs such as the documentation data, compiled partials, dustjs engine, etc... (Note that the size of this script depends especially on the generated documentation data.)</p>
<p>See <a href="?api=docma-web">Docma Web API</a>.</p>
<h3 id="custom-scripts">Custom Scripts</h3>
<p>You have full control over the main HTML file so you can include any Javascript files in it. Docma web core will always be prepended before your scripts; so that you can safely access the global <code>docma</code> object.</p>
<h3 id="initializing-the-template-web-app-">Initializing the Template (Web App)</h3>
<p>In order to make sure you execute some script after Docma is ready:</p>
<pre><code class="lang-js">// run this in any js file in the browser
docma.on('ready', function () {
    // initialize your code here
    // this runs only once
});
</code></pre>
<p>The <code>ready</code> event will only be fired once, right after the initial load. To execute some code after each content or page is rendered, you should use the <code>render</code> event instead.</p>
<pre><code class="lang-js">// run this in any js file in the browser
docma.on('render', function (currentRoute) {
    if (!currentRoute) {
        console.log('Page not found!');
        return;
    }
    if (currentRoute.type === docma.Route.Type.API) {
        // route generated for JSDoc documentation
        console.log('This is an API documentation route.');
    } else {
        // route generated for markdown/HTML content
        console.log('This is a content route.');
    }
});
</code></pre>
<h3 id="css-less">CSS &amp; Less</h3>
<p>You can include any <code>.css</code> files, anywhere in your template. Since you have control over the main HTML file, you can link any stylesheet in it. As a convention, it's recommended that you place all <code>.css</code> files under <code>&lt;template&gt;/css</code>.</p>
<p>You can also include less files in your template. Main less file(s) to be compiled, should be defined in <code>docma.template.json</code>.</p>
<h3 id="other-files">Other Files</h3>
<p>You can include any custom files anywhere in your template. They will be copied over into the output directory. If you need to include a file in the template but don't want it to be in the generated output; define it in the <code>docma.template.json</code> file, within the <code>ignore</code> setting.</p>
<h3 id="docma-default-template">Docma Default Template</h3>
<p>Docma includes a built-in default template for your convenience. Read the details on how to build your documentation with <a href="?content=default-template">default template</a>.</p>
</body></html>